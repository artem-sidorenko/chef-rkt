---

<% if ENV['DIGITALOCEAN_ACCESS_TOKEN'] %>
driver:
  name: digitalocean
  size: 512mb

platforms:
- name: centos-7-0-x64
  transport:
   ssh_key: "<%= ENV['CI_SSH_KEY'] %>"
   max_wait_until_ready: 30
- name: ubuntu-14-04-x64
  transport:
   ssh_key: "<%= ENV['CI_SSH_KEY'] %>"
   max_wait_until_ready: 30
<% else %>
driver:
  name: vagrant

platforms:
- name: bento/centos-7.2
- name: bento/ubuntu-14.04
- name: bento/ubuntu-16.04
- name: bento/debian-8.4
<% end %>

provisioner:
  name: chef_zero

verifier:
  name: inspec

suites:
  - name: default
    run_list:
      - recipe[rkt::default]
      - recipe[rkt_test::default]
  - name: without-sudo
    run_list:
      - recipe[rkt::default]
      - recipe[rkt_test::default]
    attributes:
      rkt:
        install:
          tgz:
            sudo: false
  - name: packages
    run_list:
      - recipe[rkt_test::repositories]
      - recipe[rkt::default]
      - recipe[rkt_test::default]
    attributes:
      rkt:
        install:
          type: 'package'
